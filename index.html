<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Admin e-Aduan</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #eef2f7; }
    header { background: #222; color: #fff; padding: 15px; text-align: center; }
    footer { background: #444; color: #fff; text-align: center; padding: 10px; margin-top: 20px; }
    .container { max-width: 1000px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #222; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: center; }
    th { background: #333; color: white; }
    select, button { padding: 6px; border-radius: 4px; cursor: pointer; }
    button { background: red; color: white; border: none; }
    button:hover { background: darkred; }
    .status-proses { color: #b58900; font-weight: bold; }
    .status-selesai { color: green; font-weight: bold; }
    .status-ditolak { color: red; font-weight: bold; }
    .stats { display: flex; justify-content: space-around; margin-top: 20px; }
    .card { background: #f4f4f4; padding: 15px; border-radius: 8px; text-align: center; width: 30%; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .card h3 { margin: 0; font-size: 24px; }
  </style>
</head>
<body>

<header>
  <h1>Portal Admin e-Aduan</h1>
</header>

<div class="container">
  <h2>Dashboard Aduan</h2>

  <div class="stats">
    <div class="card"><h3 id="total">0</h3><p>Jumlah Aduan</p></div>
    <div class="card"><h3 id="proses">0</h3><p>Dalam Proses</p></div>
    <div class="card"><h3 id="selesai">0</h3><p>Selesai</p></div>
  </div>

  <table id="adminTable">
    <thead>
      <tr>
        <th>ID Aduan</th>
        <th>Nama</th>
        <th>Aduan</th>
        <th>Status</th>
        <th>Tindakan</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<footer>
  &copy; 2025 e-Aduan F6 | Panel Admin
</footer>

<script>
  let aduanList = JSON.parse(localStorage.getItem("aduanList")) || [];

  function renderAdminTable() {
    const tbody = document.querySelector("#adminTable tbody");
    tbody.innerHTML = "";
    let proses = 0, selesai = 0;

    aduanList.forEach((a, index) => {
      if(a.status === "Dalam Proses") proses++;
      if(a.status === "Selesai") selesai++;
      let statusClass = a.status === "Dalam Proses" ? "status-proses" : 
                        a.status === "Selesai" ? "status-selesai" : "status-ditolak";
      tbody.innerHTML += `
        <tr>
          <td>${a.id}</td>
          <td>${a.nama}</td>
          <td>${a.aduan}</td>
          <td>
            <select onchange="updateStatus(${index}, this.value)" class="${statusClass}">
              <option ${a.status==="Dalam Proses"?"selected":""}>Dalam Proses</option>
              <option ${a.status==="Selesai"?"selected":""}>Selesai</option>
              <option ${a.status==="Ditolak"?"selected":""}>Ditolak</option>
            </select>
          </td>
          <td><button onclick="deleteAduan(${index})">Padam</button></td>
        </tr>`;
    });

    document.getElementById("total").innerText = aduanList.length;
    document.getElementById("proses").innerText = proses;
    document.getElementById("selesai").innerText = selesai;
  }

  function updateStatus(index, newStatus) {
    aduanList[index].status = newStatus;
    localStorage.setItem("aduanList", JSON.stringify(aduanList));
    renderAdminTable();
  }

  function deleteAduan(index) {
    if(confirm("Adakah anda pasti mahu memadam aduan ini?")) {
      aduanList.splice(index, 1);
      localStorage.setItem("aduanList", JSON.stringify(aduanList));
      renderAdminTable();
    }
  }

  renderAdminTable();
</script>

</body>
</html>

