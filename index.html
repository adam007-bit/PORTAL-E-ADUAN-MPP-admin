<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Portal Admin Aduan SEMSIRA</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f9f9f9; }
    h1 { color:#333; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    table, th, td { border:1px solid #ccc; }
    th, td { padding:10px; text-align:left; }
    button { cursor:pointer; padding:6px 12px; border:none; border-radius:4px; }
    .btn-update { background:#ffc107; color:white; }
    .btn-danger { background:#dc3545; color:white; }
    .lang-btn { margin-right:5px; padding:6px 12px; }
    .modal {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.5); justify-content:center; align-items:center;
    }
    .modal-content {
      background:white; padding:20px; border-radius:8px; width:400px;
    }
  </style>
</head>
<body>

  <!-- Butang Bahasa -->
  <div>
    <button class="lang-btn" onclick="setLang('ms')">🇲🇾 BM</button>
    <button class="lang-btn" onclick="setLang('zh')">🇨🇳 中文</button>
    <button class="lang-btn" onclick="setLang('en')">🇬🇧 English</button>
  </div>

  <h1 id="title"></h1>

  <h2 id="senaraiAduan"></h2>
  <table>
    <thead>
      <tr>
        <th>ID</th><th id="colNama"></th><th id="colAduan"></th>
        <th id="colStatus"></th><th id="colTarikh"></th><th id="colTindakan"></th>
      </tr>
    </thead>
    <tbody id="jadualAduan"></tbody>
  </table>

  <!-- Modal -->
  <div class="modal" id="modalKemaskini">
    <div class="modal-content">
      <h3 id="modalTitle"></h3>
      <p><b>ID:</b> <span id="detailID"></span></p>
      <p><b id="lblNama"></b>: <span id="detailNama"></span></p>
      <p><b id="lblAduan"></b>: <span id="detailAduan"></span></p>
      <label id="lblStatus"></label>
      <select id="detailStatus">
        <option>Dalam Proses</option>
        <option>Selesai</option>
        <option>Ditolak</option>
      </select>
      <label id="lblNota"></label>
      <textarea id="detailNota"></textarea>
      <br>
      <button class="btn-update" onclick="simpanKemaskini()" id="btnSimpan"></button>
      <button class="btn-danger" onclick="padamAduan()" id="btnPadam"></button>
      <button onclick="tutupModal()" id="btnTutup"></button>
    </div>
  </div>

  <script>
    let lang = "ms";
    let aduanList = JSON.parse(localStorage.getItem("aduanList")) || [];
    let currentID = "";

    const translations = {
      ms: { title:"📋 Portal Admin Aduan SEMSIRA", senaraiAduan:"Senarai Aduan", 
        colNama:"Nama", colAduan:"Aduan", colStatus:"Status", colTarikh:"Tarikh", colTindakan:"Tindakan",
        modalTitle:"Kemaskini Aduan", lblNama:"Nama", lblAduan:"Aduan", lblStatus:"Status:", lblNota:"Nota Dalaman:",
        btnSimpan:"Simpan", btnPadam:"Padam", btnTutup:"Tutup",
        msgKemaskini:"✅ Aduan berjaya dikemaskini", msgPadam:"❌ Aduan dipadam"
      },
      zh: { title:"📋 管理员投诉门户", senaraiAduan:"投诉清单", 
        colNama:"姓名", colAduan:"投诉", colStatus:"状态", colTarikh:"日期", colTindakan:"操作",
        modalTitle:"更新投诉", lblNama:"姓名", lblAduan:"投诉", lblStatus:"状态:", lblNota:"内部备注:",
        btnSimpan:"保存", btnPadam:"删除", btnTutup:"关闭",
        msgKemaskini:"✅ 投诉已更新", msgPadam:"❌ 投诉已删除"
      },
      en: { title:"📋 Admin Complaint Portal", senaraiAduan:"Complaints List", 
        colNama:"Name", colAduan:"Complaint", colStatus:"Status", colTarikh:"Date", colTindakan:"Action",
        modalTitle:"Update Complaint", lblNama:"Name", lblAduan:"Complaint", lblStatus:"Status:", lblNota:"Internal Notes:",
        btnSimpan:"Save", btnPadam:"Delete", btnTutup:"Close",
        msgKemaskini:"✅ Complaint updated", msgPadam:"❌ Complaint deleted"
      }
    };

    function setLang(l) {
      lang = l; const t = translations[lang];
      document.getElementById("title").innerText = t.title;
      document.getElementById("senaraiAduan").innerText = t.senaraiAduan;
      document.getElementById("colNama").innerText = t.colNama;
      document.getElementById("colAduan").innerText = t.colAduan;
      document.getElementById("colStatus").innerText = t.colStatus;
      document.getElementById("colTarikh").innerText = t.colTarikh;
      document.getElementById("colTindakan").innerText = t.colTindakan;
      document.getElementById("modalTitle").innerText = t.modalTitle;
      document.getElementById("lblNama").innerText = t.lblNama;
      document.getElementById("lblAduan").innerText = t.lblAduan;
      document.getElementById("lblStatus").innerText = t.lblStatus;
      document.getElementById("lblNota").innerText = t.lblNota;
      document.getElementById("btnSimpan").innerText = t.btnSimpan;
      document.getElementById("btnPadam").innerText = t.btnPadam;
      document.getElementById("btnTutup").innerText = t.btnTutup;
      paparJadual();
    }

    function paparJadual() {
      const t = translations[lang]; const tbody = document.getElementById("jadualAduan");
      tbody.innerHTML = "";
      aduanList.forEach(a=>{
        tbody.innerHTML += `
          <tr>
            <td>${a.id}</td>
            <td>${a.nama}</td>
            <td>${a.teks}</td>
            <td>${a.status}</td>
            <td>${a.tarikh}</td>
            <td><button class="btn-update" onclick="bukaModal('${a.id}')">${t.modalTitle}</button></td>
          </tr>`;
      });
    }

    function bukaModal(id) {
      const a = aduanList.find(x=>x.id===id);
      currentID = id;
      document.getElementById("detailID").innerText = a.id;
      document.getElementById("detailNama").innerText = a.nama;
      document.getElementById("detailAduan").innerText = a.teks;
      document.getElementById("detailStatus").value = a.status;
      document.getElementById("detailNota").value = a.nota;
      document.getElementById("modalKemaskini").style.display="flex";
    }

    function tutupModal(){ document.getElementById("modalKemaskini").style.display="none"; }

    function simpanKemaskini() {
      const t = translations[lang]; const idx = aduanList.findIndex(x=>x.id===currentID);
      aduanList[idx].status = document.getElementById("detailStatus").value;
      aduanList[idx].nota = document.getElementById("detailNota").value;
      localStorage.setItem("aduanList", JSON.stringify(aduanList));
      paparJadual(); tutupModal(); alert(t.msgKemaskini);
    }

    function padamAduan() {
      const t = translations[lang];
      if(confirm("❓")) {
        aduanList = aduanList.filter(x=>x.id!==currentID);
        localStorage.setItem("aduanList", JSON.stringify(aduanList));
        paparJadual(); tutupModal(); alert(t.msgPadam);
      }
    }

    setLang("ms");
  </script>
</body>
</html>


